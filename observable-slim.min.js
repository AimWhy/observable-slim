/*
 * 	Observable Slim
 * 	Version 0.0.1
 * 	https://github.com/elliotnb/observable-slim
 *
 * 	Licensed under the MIT license:
 * 	http://www.opensource.org/licenses/MIT
 */
var ObservableSlim=function(){observables=[];var r=[];targetsProxy=[];var e=null,t=function(o,a,s,n){var l=s||null,i=n||"",u=[],b=function(r,e){return r instanceof Array?""!==i?i:e:""!==i?i+"."+e:e},f=function(r){if(!0!==l.paused)if(!0===a)setTimeout(function(){if(r===u.length){for(var e=0;e<l.observers.length;e++)l.observers[e](u);u=[]}},10);else{for(var e=0;e<l.observers.length;e++)l.observers[e](u);u=[]}},v=new Proxy(o,{get:function(e,o){if("__isProxy"===o)return!0;if("__getParent"===o)return function(r){if(void 0===r)r=1;var t,o=b(e,"__getParent").split(".");return o.splice(-(r+1),r+1),t=l.proxy,o.join(".").split(".").reduce(function(r,e){return r?r[e]:void 0},t||self)};if(null!==e[o]&&"object"==typeof e[o]){var s=r.indexOf(e[o]);if(s>-1)for(var n=targetsProxy[s].length;n--;)if(targetsProxy[s][n].observable===l)return targetsProxy[s][n].proxy;var u=""!==i?i+"."+o:o;return t(e[o],a,l,u)}return e[o]},deleteProperty:function(t,o){var a=!0;e===v&&(a=!1,e=null);var s=Object.assign({},t),n=b(t,o);if(u.push({type:"delete",target:t,property:o,newValue:null,previousValue:s[o],currentPath:n,proxy:v}),!0===a){var l=r.indexOf(t);if(l>-1)for(var i=targetsProxy[l].length;i--;)targetsProxy[l][i].proxy!==v&&(e=targetsProxy[l][i].proxy,delete targetsProxy[l][i].proxy[o]);delete t[o]}return f(u.length),!0},set:function(t,o,a,s){var n=!0;if(e===v&&(n=!1,e=null),t[o]!==a||!1===n){var l=b(t,o),i="update";if(void 0===s[o]&&(i="add"),u.push({type:i,target:t,property:o,newValue:a,previousValue:s[o],currentPath:l,proxy:v}),!0===n){var y=r.indexOf(t);if(y>-1)for(var p=targetsProxy[y].length;p--;)targetsProxy[y][p].proxy!==v&&(e=targetsProxy[y][p].proxy,targetsProxy[y][p].proxy[o]=a);t[o]=a,"object"==typeof a&&function r(e){for(var t in e)e.hasOwnProperty(t)&&null!==e[t]&&"object"==typeof e[t]&&r(e[t])}(v[o])}f(u.length)}return!0}});null===l&&(l={target:o,domDelay:a,proxy:v,observers:[],paused:!1,path:i},observables.push(l));var y={target:o,proxy:v,observable:l},p=r.indexOf(o);return p>-1?targetsProxy[p].push(y):(r.push(o),targetsProxy.push([y])),v};return{create:function(r,e,o){if(!0===r.__isProxy)throw new Error("ObservableSlim.create() cannot create a Proxy for a target object that is also a Proxy.");var a=t(r,e);return"function"==typeof o&&this.observe(a,o),function r(e){for(var t in e)e.hasOwnProperty(t)&&null!==e[t]&&"object"==typeof e[t]&&r(e[t])}(a),a},observe:function(r,e){for(var t=observables.length;t--;)if(observables[t].proxy===r){observables[t].observers.push(e);break}},pause:function(r){for(var e=observables.length,t=!1;e--;)if(observables[e].proxy===r){observables[e].paused=!0,t=!0;break}if(0==t)throw new Error("ObseravableSlim could not pause observable -- matching proxy not found.")},resume:function(r){for(var e=observables.length,t=!1;e--;)if(observables[e].proxy===r){observables[e].paused=!1,t=!0;break}if(0==t)throw new Error("ObseravableSlim could not resume observable -- matching proxy not found.")},remove:function(e){for(var t=null,o=!1,a=observables.length;a--;)if(observables[a].proxy===e){t=observables[a],o=!0;break}for(var s=targetsProxy.length;s--;)for(var n=targetsProxy[s].length;n--;)targetsProxy[s][n].observable===t&&(targetsProxy[s].splice(n,1),0==targetsProxy[s].length&&(targetsProxy.splice(s,1),r.splice(s,1)));!0===o&&observables.splice(a,1)}}}();