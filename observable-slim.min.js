var ObservableSlim=function(){paths=[];var l=[],_=[],d=[],x=null,f=function(e,i,r,t){var h=r||null,u=t||[{target:e,property:""}];paths.push(u),e instanceof Array&&(e.__length=e.length);var c=[],v=function(e,r,t){for(var n="",a=null,o=0;o<u.length;o++)a instanceof Array&&!isNaN(u[o].property)&&(u[o].property=a.indexOf(u[o].target)),n=n+"."+u[o].property,a=u[o].target;return n=(n=n+"."+r).substring(2),!0===t&&(n="/"+n.replace(/\./g,"/")),n},b=function(t){if(!0!==h.paused)if(!0===i)setTimeout(function(){if(t===c.length){var e=c.slice(0);c=[];for(var r=0;r<h.observers.length;r++)h.observers[r](e)}},10);else{var e=c.slice(0);c=[];for(var r=0;r<h.observers.length;r++)h.observers[r](e)}},y=new Proxy(e,{get:function(e,r){if("__getTarget"===r)return e;if("__isProxy"===r)return!0;if("__getParent"===r)return function(e){if(void 0===e)e=1;var r,t=v(0,"__getParent").split(".");return t.splice(-(e+1),e+1),r=h.parentProxy,t.join(".").split(".").reduce(function(e,r){return e?e[r]:void 0},r||self)};var t=e[r];if(t instanceof Object&&null!==t&&e.hasOwnProperty(r)){!0===t.__isProxy&&(t=t.__getTarget);for(var n=-1,a=h.targets,o=0,s=a.length;o<s;o++)if(t===a[o]){n=o;break}if(-1<n)return h.proxies[n];var l=u.slice(0);return l.push({target:t,property:r}),f(t,i,h,l)}return t},deleteProperty:function(e,r){var t=!0;x===y&&(t=!1,x=null);var n=Object.assign({},e);if(c.push({type:"delete",target:e,property:r,newValue:null,previousValue:n[r],currentPath:v(0,r),jsonPointer:v(0,r,!0),proxy:y}),!0===t){h.changesPaused||delete e[r];for(var a=0,o=_.length;a<o&&e!==_[a];a++);for(var s=d[a],l=s.length;l--;)s[l].proxy!==y&&(x=s[l].proxy,delete s[l].proxy[r])}return b(c.length),!0},set:function(n,e,r,t){r&&r.__isProxy&&(r=r.__getTarget);var a=!0;x===y&&(a=!1,x=null);var i=n[e];if(i!==r||!1===a||"length"===e&&n instanceof Array&&n.__length!==r){var o=!0,s=typeof i,l="update";if("undefined"===s&&(l="add"),c.push({type:l,target:n,property:e,newValue:r,previousValue:t[e],currentPath:v(0,e),jsonPointer:v(0,e,!0),proxy:y}),"length"===e&&n instanceof Array&&n.__length!==r&&(c[c.length-1].previousValue=n.__length,n.__length=r),!0===a){h.changesPaused||(n[e]=r);for(var u=0,f=_.length;u<f&&n!==_[u];u++);if(o=u<f){var p=d[u],g=0;for(f=p.length;g<f;g++)p[g].proxy!==y&&(x=p[g].proxy,p[g].proxy[e]=r);setTimeout(function(){if("object"===s&&null!==i){for(var e=Object.keys(n),r=0,t=e.length;r<t;r++)if(n[e[r]]===i)return;var l=!1;if(function e(r){for(var t=Object.keys(r),n=0,a=t.length;n<a;n++){var o=t[n];if(!0===r[o].__isProxy)var s=r[o].__getTarget;else s=r[o];if(r[o]instanceof Object&&null!==r[o]&&e(s),r[o]===i)return void(l=!0)}}(n),!0===l)return;!function e(r){for(var t=Object.keys(r),n=0,a=t.length;n<a;n++){var o=r[t[n]];o instanceof Object&&null!==o&&e(o)}var s=-1;for(n=0,a=_.length;n<a;n++)if(r===_[n]){s=n;break}if(-1<s){for(var l=d[s],i=l.length;i--;)if(h===l[i].observable){l.splice(i,1);break}0==l.length&&(d.splice(s,1),_.splice(s,1))}}(i)}},1e4)}}o&&b(c.length)}return!0}});null===h?(h={parentTarget:e,domDelay:i,parentProxy:y,observers:[],targets:[e],proxies:[y],paused:!1,path:u,changesPaused:!1},l.push(h)):(h.targets.push(e),h.proxies.push(y));for(var n={target:e,proxy:y,observable:h},a=-1,o=0,s=_.length;o<s;o++)if(e===_[o]){a=o;break}return-1<a?d[a].push(n):(_.push(e),d.push([n]),a=_.length-1),y};return{create:function(e,r,t){if(!0===e.__isProxy)e=e.__getTarget;var n=f(e,r);return"function"==typeof t&&this.observe(n,t),function e(r){for(var t=r.__getTarget,n=Object.keys(t),a=0,o=n.length;a<o;a++){var s=n[a];t[s]instanceof Object&&null!==t[s]&&e(r[s])}}(n),n},observe:function(e,r){for(var t=l.length;t--;)if(l[t].parentProxy===e){l[t].observers.push(r);break}},pause:function(e){for(var r=l.length,t=!1;r--;)if(l[r].parentProxy===e){t=l[r].paused=!0;break}if(0==t)throw new Error("ObseravableSlim could not pause observable -- matching proxy not found.")},resume:function(e){for(var r=l.length,t=!1;r--;)if(l[r].parentProxy===e){t=!(l[r].paused=!1);break}if(0==t)throw new Error("ObseravableSlim could not resume observable -- matching proxy not found.")},pauseChanges:function(e){for(var r=l.length,t=!1;r--;)if(l[r].parentProxy===e){t=l[r].changesPaused=!0;break}if(0==t)throw new Error("ObseravableSlim could not pause changes on observable -- matching proxy not found.")},resumeChanges:function(e){for(var r=l.length,t=!1;r--;)if(l[r].parentProxy===e){t=!(l[r].changesPaused=!1);break}if(0==t)throw new Error("ObseravableSlim could not resume changes on observable -- matching proxy not found.")},remove:function(e){for(var r=null,t=!1,n=l.length;n--;)if(l[n].parentProxy===e){r=l[n],t=!0;break}for(var a=d.length;a--;)for(var o=d[a].length;o--;)d[a][o].observable===r&&(d[a].splice(o,1),0===d[a].length&&(d.splice(a,1),_.splice(a,1)));!0===t&&l.splice(n,1)}}}();try{module.exports=ObservableSlim}catch(e){}